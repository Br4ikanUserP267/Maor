<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAOR - Reportes Anuales</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.css">
    <style>
        :root {
            --maor-primary: #8e44ad;
            --maor-secondary: #9b59b6;
            --maor-light: #f5eef8;
        }
        .sidebar {
            background-color: var(--maor-primary);
            color: white;
        }
        .sidebar-item.active {
            background-color: var(--maor-secondary);
            border-radius: 5px;
        }
        .btn-maor {
            background-color: var(--maor-primary);
            color: white;
        }
        .btn-maor:hover {
            background-color: var(--maor-secondary);
        }
        .report-card {
            border-left: 4px solid var(--maor-primary);
            transition: all 0.3s ease;
        }
        .report-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 30px;
        }
        .kpi-card {
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        .kpi-value {
            font-size: 2.5rem;
            font-weight: bold;
        }
        .kpi-label {
            font-size: 1rem;
            color: #6c757d;
        }
        .revenue {
            background-color: #e6f7e6;
            border-left: 4px solid #28a745;
        }
        .clients {
            background-color: #e6f7ff;
            border-left: 4px solid #17a2b8;
        }
        .services {
            background-color: #fff8e6;
            border-left: 4px solid #ffc107;
        }
        .products {
            background-color: #f5eef8;
            border-left: 4px solid #8e44ad;
        }
        .tab-content {
            padding: 20px 0;
        }
    </style>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar vh-100 p-3" style="width: 280px; position: fixed; left: 0; top: 0;">
            <div class="text-center mb-4 pt-3">
                <h2><i class="fas fa-spa me-2"></i>MAOR</h2>
                <p class="small mb-0">Centro de Belleza - Sincelejo</p>
                <hr class="bg-light">
                <div class="text-start mt-4">
                    <h5 class="text-white-50 mb-3"><small>MENÚ ADMINISTRADORA</small></h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-users me-2"></i>Clientes
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-calendar-alt me-2"></i>Citas
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-concierge-bell me-2"></i>Servicios
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-box-open me-2"></i>Productos
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-user-tie me-2"></i>Empleados
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-file-invoice-dollar me-2"></i>Ventas
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item active p-2">
                                <i class="fas fa-chart-bar me-2"></i>Reportes
                            </a>
                        </li>
                        <li class="nav-item mb-2">
                            <a href="#" class="nav-link text-white sidebar-item p-2">
                                <i class="fas fa-exclamation-circle me-2"></i>PQRF
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Contenido principal -->
        <div class="flex-grow-1 p-4" style="margin-left: 280px;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2><i class="fas fa-chart-bar me-2"></i>Reportes Anuales</h2>
                <div>
                    <button class="btn btn-maor me-2" onclick="downloadFullReport()">
                        <i class="fas fa-file-pdf me-2"></i>Exportar PDF
                    </button>
                    <div class="btn-group">
                        <button class="btn btn-maor dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-calendar-alt me-2"></i>2023
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">2023</a></li>
                            <li><a class="dropdown-item" href="#">2022</a></li>
                            <li><a class="dropdown-item" href="#">2021</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Filtros -->
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label">Tipo de Reporte</label>
                            <select class="form-select" id="reportType">
                                <option value="financial">Financiero</option>
                                <option value="sales">Ventas</option>
                                <option value="services">Servicios</option>
                                <option value="products">Productos</option>
                                <option value="clients">Clientes</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">Sucursal</label>
                            <select class="form-select" id="branchFilter">
                                <option value="all">Todas las sucursales</option>
                                <option value="main">Sincelejo (Principal)</option>
                                <option value="north">Sincelejo (Norte)</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">Empleado</label>
                            <select class="form-select" id="employeeFilter">
                                <option value="all">Todos los empleados</option>
                                <option value="1">Laura Martínez</option>
                                <option value="2">Carlos Ramírez</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pestañas de reportes -->
            <ul class="nav nav-tabs" id="reportTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab">
                        <i class="fas fa-chart-pie me-2"></i>Resumen
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="financial-tab" data-bs-toggle="tab" data-bs-target="#financial" type="button" role="tab">
                        <i class="fas fa-money-bill-wave me-2"></i>Financiero
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales" type="button" role="tab">
                        <i class="fas fa-shopping-cart me-2"></i>Ventas
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab">
                        <i class="fas fa-concierge-bell me-2"></i>Servicios
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients" type="button" role="tab">
                        <i class="fas fa-users me-2"></i>Clientes
                    </button>
                </li>
            </ul>

            <!-- Contenido de las pestañas -->
            <div class="tab-content" id="reportTabsContent">
                <!-- Resumen -->
                <div class="tab-pane fade show active" id="summary" role="tabpanel">
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="kpi-card revenue">
                                <div class="kpi-value">$185,450K</div>
                                <div class="kpi-label">Ingresos Anuales</div>
                                <small class="text-success">+12% vs 2022</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi-card clients">
                                <div class="kpi-value">1,248</div>
                                <div class="kpi-label">Clientes Atendidos</div>
                                <small class="text-success">+8% vs 2022</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi-card services">
                                <div class="kpi-value">3,456</div>
                                <div class="kpi-label">Servicios Prestados</div>
                                <small class="text-success">+15% vs 2022</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi-card products">
                                <div class="kpi-value">2,187</div>
                                <div class="kpi-label">Productos Vendidos</div>
                                <small class="text-success">+5% vs 2022</small>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Ingresos Mensuales 2023</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="monthlyRevenueChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Distribución de Ingresos</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="revenueDistributionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Top 5 Servicios Más Rentables</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Servicio</th>
                                                    <th>Cantidad</th>
                                                    <th>Ingresos</th>
                                                    <th>% del Total</th>
                                                    <th>Crecimiento vs 2022</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Facial Premium</td>
                                                    <td>456</td>
                                                    <td>$82,080K</td>
                                                    <td>44.2%</td>
                                                    <td><span class="text-success">+18%</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Maquillaje Profesional</td>
                                                    <td>312</td>
                                                    <td>$62,400K</td>
                                                    <td>33.6%</td>
                                                    <td><span class="text-success">+12%</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Tratamiento Capilar</td>
                                                    <td>287</td>
                                                    <td>$43,050K</td>
                                                    <td>23.2%</td>
                                                    <td><span class="text-danger">-5%</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Financiero -->
                <div class="tab-pane fade" id="financial" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Estado Financiero Anual</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>Concepto</th>
                                                    <th>Total</th>
                                                    <th>% Ingresos</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>Ingresos Totales</strong></td>
                                                    <td>$185,450K</td>
                                                    <td>100%</td>
                                                </tr>
                                                <tr>
                                                    <td>Costos Directos</td>
                                                    <td>$55,635K</td>
                                                    <td>30%</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Utilidad Bruta</strong></td>
                                                    <td>$129,815K</td>
                                                    <td>70%</td>
                                                </tr>
                                                <tr>
                                                    <td>Gastos Operativos</td>
                                                    <td>$92,725K</td>
                                                    <td>50%</td>
                                                </tr>
                                                <tr class="table-success">
                                                    <td><strong>Utilidad Neta</strong></td>
                                                    <td>$37,090K</td>
                                                    <td>20%</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Evolución de Margen Bruto</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="grossMarginChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Análisis de Gastos Operativos</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" style="height: 400px;">
                                        <canvas id="expensesChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ventas -->
                <div class="tab-pane fade" id="sales" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Tendencia de Ventas Mensuales</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="salesTrendChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Métodos de Pago</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="paymentMethodsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Productos Más Vendidos</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Producto</th>
                                                    <th>Unidades</th>
                                                    <th>Ingresos</th>
                                                    <th>% Ventas</th>
                                                    <th>Rotación</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Crema Hidratante Premium</td>
                                                    <td>456</td>
                                                    <td>$38,760K</td>
                                                    <td>20.9%</td>
                                                    <td>4.2</td>
                                                </tr>
                                                <tr>
                                                    <td>Shampoo Reconstrucción</td>
                                                    <td>387</td>
                                                    <td>$23,994K</td>
                                                    <td>12.9%</td>
                                                    <td>3.8</td>
                                                </tr>
                                                <tr>
                                                    <td>Base Líquida Maquillaje</td>
                                                    <td>312</td>
                                                    <td>$37,440K</td>
                                                    <td>20.2%</td>
                                                    <td>4.5</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Servicios -->
                <div class="tab-pane fade" id="services" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Servicios Más Solicitados</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="popularServicesChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Eficiencia por Empleado</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="employeeEfficiencyChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Horarios Más Demandados</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container" style="height: 400px;">
                                        <canvas id="timeDemandChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Clientes -->
                <div class="tab-pane fade" id="clients" role="tabpanel">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Nuevos vs Recurrentes</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="clientsTypeChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Fidelización</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="retentionChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Clientes Top por Valor</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Cliente</th>
                                                    <th>Visitas</th>
                                                    <th>Servicios</th>
                                                    <th>Productos</th>
                                                    <th>Total Gastado</th>
                                                    <th>Última Visita</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>María González</td>
                                                    <td>24</td>
                                                    <td>18</td>
                                                    <td>12</td>
                                                    <td>$4,250K</td>
                                                    <td>15/12/2023</td>
                                                </tr>
                                                <tr>
                                                    <td>Carlos Ramírez</td>
                                                    <td>18</td>
                                                    <td>12</td>
                                                    <td>8</td>
                                                    <td>$3,120K</td>
                                                    <td>10/12/2023</td>
                                                </tr>
                                                <tr>
                                                    <td>Ana Rodríguez</td>
                                                    <td>15</td>
                                                    <td>10</td>
                                                    <td>7</td>
                                                    <td>$2,850K</td>
                                                    <td>05/12/2023</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    
    <script>
        // Función para descargar reporte completo en PDF
        function downloadFullReport() {
            alert("Descargando reporte anual completo en PDF...");
            // En una implementación real, aquí iría la lógica para generar el PDF
        }

        // Inicializar gráficos
        document.addEventListener('DOMContentLoaded', function() {
            // Gráfico de ingresos mensuales
            const monthlyRevenueCtx = document.getElementById('monthlyRevenueChart').getContext('2d');
            const monthlyRevenueChart = new Chart(monthlyRevenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: '2023',
                        data: [12500, 13200, 14100, 15800, 14900, 16200, 17500, 18200, 16500, 17800, 19200, 20500],
                        backgroundColor: 'rgba(142, 68, 173, 0.7)',
                        borderColor: 'rgba(142, 68, 173, 1)',
                        borderWidth: 1
                    }, {
                        label: '2022',
                        data: [11500, 12100, 13000, 14500, 13800, 14800, 15800, 16500, 15200, 16300, 17500, 18500],
                        backgroundColor: 'rgba(174, 168, 211, 0.7)',
                        borderColor: 'rgba(174, 168, 211, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': $' + context.raw.toLocaleString() + 'K';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString() + 'K';
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de distribución de ingresos
            const revenueDistributionCtx = document.getElementById('revenueDistributionChart').getContext('2d');
            const revenueDistributionChart = new Chart(revenueDistributionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Faciales', 'Corporales', 'Capilares', 'Maquillaje', 'Productos'],
                    datasets: [{
                        data: [44, 25, 18, 10, 3],
                        backgroundColor: [
                            'rgba(142, 68, 173, 0.7)',
                            'rgba(41, 128, 185, 0.7)',
                            'rgba(39, 174, 96, 0.7)',
                            'rgba(243, 156, 18, 0.7)',
                            'rgba(211, 84, 0, 0.7)'
                        ],
                        borderColor: [
                            'rgba(142, 68, 173, 1)',
                            'rgba(41, 128, 185, 1)',
                            'rgba(39, 174, 96, 1)',
                            'rgba(243, 156, 18, 1)',
                            'rgba(211, 84, 0, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de margen bruto
            const grossMarginCtx = document.getElementById('grossMarginChart').getContext('2d');
            const grossMarginChart = new Chart(grossMarginCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: 'Margen Bruto %',
                        data: [68, 69, 70, 71, 72, 71, 72, 73, 72, 71, 72, 73],
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderColor: 'rgba(46, 204, 113, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 65,
                            max: 75,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de gastos operativos
            const expensesCtx = document.getElementById('expensesChart').getContext('2d');
            const expensesChart = new Chart(expensesCtx, {
                type: 'bar',
                data: {
                    labels: ['Personal', 'Arriendo', 'Servicios', 'Marketing', 'Productos', 'Otros'],
                    datasets: [{
                        label: 'Gastos Operativos 2023',
                        data: [45000, 18000, 12000, 8500, 6500, 3500],
                        backgroundColor: [
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(241, 196, 15, 0.7)',
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(149, 165, 166, 0.7)'
                        ],
                        borderColor: [
                            'rgba(231, 76, 60, 1)',
                            'rgba(241, 196, 15, 1)',
                            'rgba(52, 152, 219, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(149, 165, 166, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return '$' + context.raw.toLocaleString() + 'K';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString() + 'K';
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de tendencia de ventas
            const salesTrendCtx = document.getElementById('salesTrendChart').getContext('2d');
            const salesTrendChart = new Chart(salesTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: 'Ventas 2023',
                        data: [320, 340, 365, 390, 380, 410, 430, 450, 420, 440, 470, 500],
                        backgroundColor: 'rgba(142, 68, 173, 0.2)',
                        borderColor: 'rgba(142, 68, 173, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + ' ventas';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 300
                        }
                    }
                }
            });

            // Gráfico de métodos de pago
            const paymentMethodsCtx = document.getElementById('paymentMethodsChart').getContext('2d');
            const paymentMethodsChart = new Chart(paymentMethodsCtx, {
                type: 'pie',
                data: {
                    labels: ['Efectivo', 'Tarjeta', 'Transferencia'],
                    datasets: [{
                        data: [45, 40, 15],
                        backgroundColor: [
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(149, 165, 166, 0.7)'
                        ],
                        borderColor: [
                            'rgba(46, 204, 113, 1)',
                            'rgba(52, 152, 219, 1)',
                            'rgba(149, 165, 166, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de servicios populares
            const popularServicesCtx = document.getElementById('popularServicesChart').getContext('2d');
            const popularServicesChart = new Chart(popularServicesCtx, {
                type: 'bar',
                data: {
                    labels: ['Facial Premium', 'Maquillaje', 'Tratamiento Capilar', 'Masaje', 'Manicure'],
                    datasets: [{
                        label: 'Servicios más solicitados',
                        data: [456, 312, 287, 210, 185],
                        backgroundColor: 'rgba(155, 89, 182, 0.7)',
                        borderColor: 'rgba(155, 89, 182, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Gráfico de eficiencia por empleado
            const employeeEfficiencyCtx = document.getElementById('employeeEfficiencyChart').getContext('2d');
            const employeeEfficiencyChart = new Chart(employeeEfficiencyCtx, {
                type: 'radar',
                data: {
                    labels: ['Productividad', 'Satisfacción', 'Puntualidad', 'Ventas', 'Recomendaciones'],
                    datasets: [{
                        label: 'Laura Martínez',
                        data: [90, 95, 88, 85, 92],
                        backgroundColor: 'rgba(142, 68, 173, 0.2)',
                        borderColor: 'rgba(142, 68, 173, 1)',
                        borderWidth: 2
                    }, {
                        label: 'Carlos Ramírez',
                        data: [85, 88, 90, 82, 87],
                        backgroundColor: 'rgba(41, 128, 185, 0.2)',
                        borderColor: 'rgba(41, 128, 185, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 50,
                            suggestedMax: 100
                        }
                    }
                }
            });

            // Gráfico de demanda horaria
            const timeDemandCtx = document.getElementById('timeDemandChart').getContext('2d');
            const timeDemandChart = new Chart(timeDemandCtx, {
                type: 'line',
                data: {
                    labels: ['9 AM', '10 AM', '11 AM', '12 PM', '1 PM', '2 PM', '3 PM', '4 PM', '5 PM', '6 PM'],
                    datasets: [{
                        label: 'Citas por hora',
                        data: [15, 45, 60, 40, 30, 55, 70, 65, 40, 20],
                        backgroundColor: 'rgba(142, 68, 173, 0.2)',
                        borderColor: 'rgba(142, 68, 173, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Gráfico de tipos de clientes
            const clientsTypeCtx = document.getElementById('clientsTypeChart').getContext('2d');
            const clientsTypeChart = new Chart(clientsTypeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Nuevos', 'Recurrentes', 'Inactivos'],
                    datasets: [{
                        data: [320, 780, 148],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });

            // Gráfico de retención
            const retentionCtx = document.getElementById('retentionChart').getContext('2d');
            const retentionChart = new Chart(retentionCtx, {
                type: 'bar',
                data: {
                    labels: ['1ra visita', '2da visita', '3ra visita', '4ta visita', '5+ visitas'],
                    datasets: [{
                        label: 'Tasa de retención',
                        data: [100, 65, 45, 30, 25],
                        backgroundColor: 'rgba(155, 89, 182, 0.7)',
                        borderColor: 'rgba(155, 89, 182, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>